# 7/11
通过对ssd中的磨损均衡（wear leveling）技术的了解，认识到存在动态和静态两种磨损均衡类型，动态类型即每次需要写入时寻找空闲块池中最少擦除计数的块，并通过逻辑地址在转换映射表上建立彼此的映射关系，这样即使对同一逻辑地址多次写入也会自动映射到不同的物理地址，避免了对同一物理地址的重复使用，实现了磨损均衡，但是这种方法没有考虑到一些写入后就没有变化的数据块，比如多媒体文件等；此时就需要引入静态的磨损均衡，这种均衡方式对于闲置的块设定了一个阈值，若超过这个阈值会将其中的内容与空闲块池中最少擦除计数的块互换，于是可以达到一种整体均衡的效果。
值得注意的是，在flash文件系统的架构中，底层 flash 设备分配块、地址转换、磨损均衡和垃圾收集等都是在FTL（Flash Translation Layer）中完成，在我的理解中，这一层主要是因为ssd和传统的磁盘有很多不同的点，比如：写入之前要先擦除、NAND flash设备的写入擦除次数有限等等，所以需要在文件系统和存储实体之间有一个磁盘管理软件抽象层，方便使用。
f2fs文件系统（flash friendly file system），是专门针对ssd闪存特性设计的文件系统，从其名字中也可见一斑，它是一种LFS（Log-Structured File System），这种文件系统（LFS）的特性是out-place更新和顺序写入，但存在Wandering Tree、没有对数据进行分类等问题，f2fs通过引入NAT（Node Address Table)和冷热数据分离很好的解决了雪崩问题和垃圾回收的开销问题，但其仍存在一定不足，如：数据的冷热分离还比较简单，仅仅通过数据的类型（是否为目录、文件或多媒体文件等）来分类，可以结合实际的应用场景进行一定的优化和改良，这也是我们本次研究中希望解决的一个问题。
